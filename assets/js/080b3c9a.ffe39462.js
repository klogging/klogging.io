"use strict";(self.webpackChunkklogging_io=self.webpackChunkklogging_io||[]).push([[2789],{8414:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"configuration/pattern-rendering","title":"Pattern rendering","description":"You can configure rendering using a pattern, like pattern layouts for","source":"@site/docs/configuration/pattern-rendering.md","sourceDirName":"configuration","slug":"/configuration/pattern-rendering","permalink":"/docs/configuration/pattern-rendering","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":50,"frontMatter":{"sidebar_position":50},"sidebar":"tutorialSidebar","previous":{"title":"Built-in configurations","permalink":"/docs/configuration/built-ins"},"next":{"title":"Context","permalink":"/docs/context/"}}');var s=t(4848),r=t(8453);const l={sidebar_position:50},c="Pattern rendering",d={},o=[{value:"Pattern language",id:"pattern-language",level:2},{value:"Tokens",id:"tokens",level:3},{value:"Size specification",id:"size-specification",level:3},{value:"Format specification",id:"format-specification",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pattern-rendering",children:"Pattern rendering"})}),"\n",(0,s.jsxs)(n.p,{children:["You can configure rendering using a pattern, like pattern layouts for\n",(0,s.jsx)(n.a,{href:"https://logging.apache.org/log4j/2.x/manual/pattern-layout.html",children:"Log4j"})," and\n",(0,s.jsx)(n.a,{href:"https://logback.qos.ch/manual/layouts.html#ClassicPatternLayout",children:"Logback"}),".\nPattern rendering is best suited to console output."]}),"\n",(0,s.jsxs)(n.p,{children:["You can specify a pattern using the ",(0,s.jsx)(n.a,{href:"/docs/configuration/dsl",children:"configuration DSL"}),", for example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",children:'  sink(\n      "console",\n      RenderPattern("%t{LOCAL_TIME} %-5v{COLOUR} [%-10c] - %30l - %m - %i%s"),\n      STDOUT\n  )\n  // etc.\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Here is a ",(0,s.jsx)(n.a,{href:"/docs/configuration/json",children:"JSON configuration"})," example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "sinks": {\n    "console": {\n      "renderPattern": "%t{LOCAL_TIME} %-5v{COLOUR} [%-10c] - %30l - %m - %i%s",\n      "sendTo": "STDOUT"\n    }\n  }\n  // etc.\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"pattern-language",children:"Pattern language"}),"\n",(0,s.jsx)(n.p,{children:"Patterns contain:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fixed text that is included in every output."}),"\n",(0,s.jsxs)(n.li,{children:["Tokens representing log event fields with optional size specification. Some tokens can be followed by a format\nspecifier. Examples are ",(0,s.jsx)(n.code,{children:"%t"}),", ",(0,s.jsx)(n.code,{children:"%-10l"})," and ",(0,s.jsx)(n.code,{children:"%-5v{COLOUR}"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tokens",children:"Tokens"}),"\n",(0,s.jsxs)(n.p,{children:["The pattern language includes the following fields, each specified using ",(0,s.jsx)(n.code,{children:"%"})," and a single letter:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Token"}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.a,{href:"/docs/concepts/log-events",children:"Field"})}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%t"})}),(0,s.jsx)(n.td,{children:"Timestamp"}),(0,s.jsxs)(n.td,{children:["Default format is ISO8601, e.g. ",(0,s.jsx)(n.code,{children:"2024-11-25T05:52:15.286632Z"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%h"})}),(0,s.jsx)(n.td,{children:"Host"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%l"})}),(0,s.jsx)(n.td,{children:"Logger name"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%c"})}),(0,s.jsx)(n.td,{children:"Context"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%v"})}),(0,s.jsx)(n.td,{children:"Logging level"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%m"})}),(0,s.jsx)(n.td,{children:"Log message"}),(0,s.jsxs)(n.td,{children:["If the message is a ",(0,s.jsx)(n.a,{href:"/docs/logging/sending-logs#message-template",children:"template"}),", it is evaluated before being output."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%s"})}),(0,s.jsx)(n.td,{children:"Stack trace"}),(0,s.jsx)(n.td,{children:"Only output if present, preceded by a newline."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%i"})}),(0,s.jsx)(n.td,{children:"Items"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.code,{children:"%n"})}),(0,s.jsx)(n.td,{children:"Newline"}),(0,s.jsx)(n.td,{children:"Output a single newline character."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"size-specification",children:"Size specification"}),"\n",(0,s.jsxs)(n.p,{children:["A size specification is put between ",(0,s.jsx)(n.code,{children:"%"})," and the token letter. It is used to fit the field value into a fixed width,\neither left-or right aligned."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Zero"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Show the field value full width, the same as omitting the size specification."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Positive"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the field value is longer than the size, maybe shorten it (see below) and show the left-most characters."}),"\n",(0,s.jsx)(n.li,{children:"If the value is shorter, left-align it in the width specified by the size."}),"\n",(0,s.jsx)(n.li,{children:"For stack traces, sets the maximum number of lines to show."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Negative"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the field value is longer than the size, maybe shorten it (see below) and show the left-most characters."}),"\n",(0,s.jsx)(n.li,{children:"If the value is shorter, right-align it in the width specified by the size."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A size specification for the ",(0,s.jsx)(n.code,{children:"%n"})," newline token is ignored."]}),"\n",(0,s.jsx)(n.li,{children:"Host, logger name and context values are shortened if they are longer than the specified size."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Some example output from the pattern ",(0,s.jsx)(n.code,{children:'"%t{LOCAL_TIME} %-5v [%-20c] - %20l - %m - %i%2s"'})," is:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"16:55:45.014298  INFO [  D-worker-1+Playpen] - i.k.e.KloggerPlaypen - Event 3 at 2024-11-25T16:55:45.014279 - {run=ad085c84-35b2-4700-a57d-14a382d009a9, Counter=3, Iteration=3}\n16:55:45.040453 ERROR [  D-worker-3+Playpen] - i.k.e.KloggerPlaypen - Message: Oops! Something went wrong - {run=ad085c84-35b2-4700-a57d-14a382d009a9, Message=Oops! Something went wrong}\njava.lang.RuntimeException: Oops! Something went wrong\n\tat io.klogging.PlaypenKt.functionWithException(Playpen.kt:159)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"format-specification",children:"Format specification"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"%t"})," and ",(0,s.jsx)(n.code,{children:"%v"})," tokens can take a format specifier."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Format"}),(0,s.jsx)(n.th,{children:"Effect"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"%t{LOCAL_TIME}"})}),(0,s.jsx)(n.td,{children:"Output only the time component of the event timestamp in the local timezone, instead of ISO8601 timestamp."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"%v{COLOUR}"})," or",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"%v{COLOR}"})]}),(0,s.jsxs)(n.td,{children:["Output log levels with a different colour for each level, as for ",(0,s.jsx)(n.a,{href:"/docs/configuration/built-ins#render_ansi",children:(0,s.jsx)(n.code,{children:"RENDER_ANSI"})}),"."]})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Level colours are (approximately):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)("span",{className:"render-grey",children:"TRACE"}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"DEBUG"}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)("span",{className:"render-green",children:"INFO"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)("span",{className:"render-yellow",children:"WARN"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)("span",{className:"render-red",children:"ERROR"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)("span",{className:"render-bright-red",children:"FATAL"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You can combine size and format specifications."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var i=t(6540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);